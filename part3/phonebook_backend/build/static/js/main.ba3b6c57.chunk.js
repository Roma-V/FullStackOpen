(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(2),o=t.n(a),r=t(15),i=t.n(r),u=(t(22),t(5)),l=t(3),s=t(4),b=t.n(s),d="/api/persons",j=function(){return b.a.get(d).then((function(e){return e.data}))},f=function(e){return b.a.post(d,e).then((function(e){return e.data}))},h=function(e){return b.a.delete("".concat(d,"/").concat(e)).then((function(e){return e}))},m=function(e){return b.a.put("".concat(d,"/").concat(e.id),e).then((function(e){return e.data}))},O=function(e){var n=e.name,t=e.callback;return Object(c.jsxs)("div",{children:["Filter by name:",Object(c.jsx)("input",{value:n,onChange:t})]})},p=function(e){var n=e.name,t=e.number,a=e.nameCallback,o=e.numberCallback,r=e.submitCallback;return Object(c.jsxs)("form",{onSubmit:r,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:n,onChange:a})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:t,onChange:o})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.persons,t=e.filter,a=e.deleteCallback;return Object(c.jsx)("div",{children:n.map((function(e){return""===t||e.name.toLowerCase().includes(t.toLowerCase())?Object(c.jsx)(x,{person:e,deleteCallback:a},e.id):""}))})},x=function(e){var n=e.person,t=e.deleteCallback;return Object(c.jsxs)("li",{className:"person",children:[n.name," ",n.number,Object(c.jsx)("button",{onClick:t(n.id),children:"delete"})]})},g=function(e){var n=e.message,t=e.type;return null===n?null:Object(c.jsx)("div",{className:t,children:n})},k=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],r=function(){j().then((function(e){console.log("Data recieved",e),o(e)}))};Object(a.useEffect)(r,[]);var i=Object(a.useState)(""),s=Object(l.a)(i,2),b=s[0],d=s[1],x=Object(a.useState)(""),k=Object(l.a)(x,2),C=k[0],w=k[1],S=function(){d(""),w("")},y=Object(a.useState)(""),A=Object(l.a)(y,2),D=A[0],N=A[1],T=Object(a.useState)(null),E=Object(l.a)(T,2),J=E[0],L=E[1],B=Object(a.useState)("notification"),F=Object(l.a)(B,2),I=F[0],M=F[1],P=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;M(n),L(e),setTimeout((function(){L(null)}),t)};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(g,{message:J,type:I}),Object(c.jsx)(O,{name:D,callback:function(e){N(e.target.value)}}),Object(c.jsx)("h3",{children:" Add new"}),Object(c.jsx)(p,{name:b,number:C,nameCallback:function(e){d(e.target.value)},numberCallback:function(e){w(e.target.value)},submitCallback:function(e){if(e.preventDefault(),b){var n=t.find((function(e){return e.name===b}));if(n){if(window.confirm("".concat(b," is already in phonebook. Replace the old number with a new one?"))){var c=Object(u.a)(Object(u.a)({},n),{},{number:C});m(c).then((function(e){console.log("updated contact",e),P("Changed number for ".concat(e.name),"notification"),o(t.map((function(n){return n.id!==e.id?n:e}))),S()}),(function(e){console.log(e.toString()),P("Cannot change number for ".concat(b),"error"),r()}))}}else console.log("add contact:",b),f({name:b,number:C}).then((function(e){P("Added ".concat(e.name),"notification"),o(t.concat(e)),S()}))}}}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(v,{persons:t,filter:D,deleteCallback:function(e){return function(n){n.preventDefault();var c=t.find((function(n){return n.id===e})).name;window.confirm("This will delete ".concat(c,". Are you sure?"))&&(console.log("delete contact:",e),h(e).then((function(n){console.log(n.statusText),200!==n.status&&204!==n.status||o(t.filter((function(n){return n.id!==e})))})).catch((function(e){console.log(e),P("Cannot delete ".concat(c),"error"),r()})))}}})]})};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ba3b6c57.chunk.js.map